#!/bin/sh
echo Installing dependencies
sudo apt-get install openjdk-8-jdk socat # to actually run the server
sudo apt-get install python # for prepareSmartCard.sh

echo Setting permissions for the bitflipper
sudo sh -c 'echo 0 > /proc/sys/kernel/yama/ptrace_scope'

echo Creating flag
echo "flag{At_4b0ut_100_d3gr33s_C3ls1us_th3_m3m0ry_ch1ps_st4rt_g3n3r4t1ng_f4ults--(Appel_and_Govindavajhala,_2003)}" > flag

echo Compiling OracleVote
javac OracleVote.java

echo Making everything immutable and readable
sudo chown root:root ./*
sudo chmod a-w ./*
sudo chmod a+r ./*
sudo chattr +i ./*

