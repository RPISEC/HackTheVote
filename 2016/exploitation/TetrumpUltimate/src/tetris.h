#ifndef TETRIS_H
#define TETRIS_H

#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

#include "board.h"
#include "minos.h"
#include "util.h"

typedef struct
{
    int bag[7];
    int bag_index;
    board_state board;
    void (*lose)(board_state *);
} game_state;

void init_game(game_state *);
void init_active_mino(game_state *, uint64_t, int);
void get_next_mino(game_state *);
int check_collision(board_state *, mino_state *);
void soft_drop(board_state *);
void hard_drop(board_state *);
void move_left(board_state *);
void move_right(board_state *);
void rotate_softdrop(mino_state *);
void try_rotate(board_state *, mino_state *);
void active_rotate_left(board_state*);
void active_rotate_right(board_state*);
char get_input(void);
void handle_event(game_state *, char);
void game_over(board_state *);
int blah(int);
void hold_mino(game_state *);

#endif

